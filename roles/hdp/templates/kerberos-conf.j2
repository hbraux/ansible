[
  {
    "Clusters": {
      "desired_config": {
        "type": "krb5-conf",
        "tag": "{{ ansible_date_time.epoch }}",
        "properties": {
          "domains":"",
          "manage_krb5_conf": "false",
          "conf_dir":"/etc",
	  "content" : "{{ file_krb5.stdout }}"
	  }
      }
    }
  },
  {
    "Clusters": {
      "desired_config": {
        "type": "kerberos-env",
        "tag": "{{ ansible_date_time.epoch }}",
        "properties": {
          "kdc_type": "mit-kdc",
          "manage_identities": "true",
          "install_packages": "false",
          "encryption_types": "aes des3-cbc-sha1 rc4 des-cbc-md5",
          "realm" : "{{ hdp.cluster.kerberos.realm }}",
          "kdc_host" : "{{ inventory_hostname }}",
          "admin_server_host" : "{{ inventory_hostname }}",
          "executable_search_paths" : "/usr/bin, /bin",
          "password_length": "20",
          "password_min_lowercase_letters": "1",
          "password_min_uppercase_letters": "1",
          "password_min_digits": "1",
          "password_min_punctuation": "1",
          "password_min_whitespace": "0",
          "service_check_principal_name" : "${cluster_name}-${short_date}",
          "case_insensitive_username_rules" : "false"
        }
      }
    }
  }
]

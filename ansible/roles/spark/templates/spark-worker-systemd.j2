[Unit]
Description=Spark Worker Service
Wants=network.target network-online.target
After=network.target network-online.target

[Service]
Type=forking
User=spark
WorkingDirectory={{ path.data }} 
Environment=SPARK_CONF_DIR={{ path.cfg }} SPARK_LOG_DIR={{ path.log }}
ExecStart={{ path.bin }}/sbin/start-slave.sh spark://{{ hostvars[inventory_hostname].master }}:{{ port.spark_master }} --webui-port {{ port.spark_worker_ui }} 
ExecStop={{ path.bin }}/sbin/stop-slave.sh
Restart=on-abort

[Install]
WantedBy=multi-user.target

